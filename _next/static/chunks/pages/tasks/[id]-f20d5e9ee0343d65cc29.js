(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[484],{9102:function(t,e,a){"use strict";a.d(e,{Z:function(){return i}});var r=a(9034),s=a.n(r),n=a(5893),i=function(){return(0,n.jsx)("div",{style:{height:"100%",justifyContent:"center",alignItems:"center"},children:(0,n.jsx)("div",{style:{maxWidth:"960px",margin:"0 auto"},children:(0,n.jsx)("div",{className:s()["lds-dual-ring"]})})})}},7457:function(t,e,a){"use strict";var r=a(3154),s=a(8243),n=a(2503);e.Z=function(t){return s.s?(0,r.s)(t):(0,n.ZP)("/tasks")}},9166:function(t,e,a){"use strict";a.d(e,{Az:function(){return s},_d:function(){return n},JF:function(){return i}});var r=a(6486),s=function(t,e){return t.filter((function(t){return""===e||(!!t.name.includes(e)||(!!t.category.includes(e)||(!!t.author.includes(e)||!!t.tags.some((function(t){return t.includes(e)})))))}))},n=function(t){return(0,r.orderBy)(t,[function(t){return t.score},function(t){return t.solved_by.length}],["asc","desc"])},i=function(t){return function(e){return e.solved_by.map((function(t){return t.team_id})).includes((null===t||void 0===t?void 0:t.team_id)||0)}}},3633:function(t,e,a){"use strict";a.r(e),a.d(e,{__N_SSG:function(){return G},default:function(){return L}});var r=a(266),s=a(809),n=a.n(s),i=a(1163),o=a(9102),l=a(3139),c=a(7457),d=function(t){var e=t.endsWith("/")?t.slice(0,-1):t,a=e.split("/");return 1===a.length?e:a.slice(0,-1).join("/")},u=a(8668),g=a(2283),m=a(3154),_=a(9166),f=a(7294),v=a(6721),p=a(2809),h=a(219),k=a(1072),j=a.n(k),b=a(4184),x=a.n(b),O=a(5893),y=["className"];function N(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}var w=f.forwardRef((function(t,e){var a=t.className,r=(0,h.Z)(t,y),s=x()(a||"",j().text);return(0,O.jsx)("input",function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?N(Object(a),!0).forEach((function(e){(0,p.Z)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({ref:e,className:s},r))})),P=a(159),C=a(7604),S=a.n(C);function Z(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}var D=function(t){var e=(0,P.Z)({},t);return e.className=x()(e.className,S().button),(0,O.jsx)("button",function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Z(Object(a),!0).forEach((function(e){(0,p.Z)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Z(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},e))},E=a(7979),F=a.n(E),T=a(1664),I=a(6486);function q(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function z(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?q(Object(a),!0).forEach((function(e){(0,p.Z)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):q(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var B=function(t){var e=t.task,a=t.registerFlag,r=t.onFlagSubmit,s=t.onClose,n=t.isSolved,i=(0,I.orderBy)(e.solved_by,["solved_at"],["asc"]);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("div",{className:F()["dialog-wrapper"],children:(0,O.jsxs)("div",{className:F().dialog,children:[(0,O.jsxs)("div",{className:F()["dialog-left"],children:[(0,O.jsxs)("div",{className:F()["dialog-head"],children:[n&&"\ud83c\udf82",e.name," - ",e.score]}),(0,O.jsx)("div",{className:F()["dialog-tags"],children:e.tags.map((function(t){return(0,O.jsx)("div",{className:F()["dialog-tag"],children:t},t)}))}),(0,O.jsx)("div",{className:F()["dialog-description"],dangerouslySetInnerHTML:{__html:e.description}}),(0,O.jsx)("div",{className:F()["dialog-attachments"],children:e.attachments&&e.attachments.map((function(t){return(0,O.jsx)("a",{href:t.url,download:!0,children:t.name},t.name)}))}),(0,O.jsxs)("div",{className:F()["dialog-author"],children:["author: ",e.author]}),(0,O.jsxs)("form",{onSubmit:r,children:[(0,O.jsx)(w,z({type:"text",placeholder:"CakeCTF{NamuNamu...}"},a("flag"))),(0,O.jsx)(D,{type:"submit",children:"Submit"})]})]}),(0,O.jsx)("div",{className:F()["dialog-right"],children:(0,O.jsxs)("div",{className:F()["dialog-right-inner"],children:[(0,O.jsxs)("div",{className:F()["dialog-solvenum"],children:[i.length," solves"]}),(0,O.jsx)("div",{className:F()["dialog-solves"],children:i.map((function(t){return(0,O.jsx)("div",{className:F()["dialog-solve-team"],children:(0,O.jsx)(T.default,{href:"/teams/"+t.team_id,children:t.team_name})},t.team_id)}))})]})})]})}),(0,O.jsx)("a",{onClick:function(){return s()},children:(0,O.jsx)("div",{className:F()["dialog-background"]})})]})},G=!0,L=function(t){var e=t.taskID,a=t.tasks,s=(0,i.useRouter)(),p=(0,c.Z)(a),h=p.data,k=p.mutate,j=(0,l.Z)(null).data,b=(0,u.Z)(),x=b.message,y=b.error,N=(0,g.cI)(),w=N.register,P=N.handleSubmit,C=(0,f.useCallback)((0,_.JF)(j||null),[j]);if(!h||void 0===j)return(0,O.jsx)(o.Z,{});var S=function(){var t=(0,r.Z)(n().mark((function t(e){var a;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.hi.post("/submit",{flag:e.flag});case 3:a=t.sent,x(a),k(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),y(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),Z=h.filter((function(t){return t.id===e}));if(1!==Z.length)return(0,O.jsx)(o.Z,{});var D=Z[0],E=d(s.pathname);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(B,{task:D,onClose:function(){return s.push(E,void 0,{scroll:!1,shallow:!0})},registerFlag:w,onFlagSubmit:P(S),isSolved:C(D)}),(0,O.jsx)(v.Z,{tasks:h,filterTask:_.Az,sortTask:_._d,isSolved:C})]})}},6721:function(t,e,a){"use strict";a.d(e,{Z:function(){return d}});var r=a(1163),s=(a(7294),a(7725)),n=a.n(s),i=a(4184),o=a.n(i),l=a(5893),c=function(t){var e=t.task,a=t.isSolved,s=(0,r.useRouter)(),i=a?o()(n().task,n()["task-solved"]):n().task;return(0,l.jsx)("a",{className:i,onClick:function(){s.push("/tasks/"+e.id,void 0,{scroll:!1,shallow:!0})},children:(0,l.jsxs)("div",{className:n()["task-cover"],children:[(0,l.jsx)("div",{className:n()["task-upper"],children:(0,l.jsx)("div",{className:n()["task-name"],children:e.name})}),(0,l.jsx)("div",{className:n()["task-middle"],children:(0,l.jsx)("div",{className:n()["task-score"],children:e.score})}),(0,l.jsxs)("div",{className:n()["task-lower"],children:[(0,l.jsx)("div",{className:n()["task-tags"],children:e.tags.map((function(t){return(0,l.jsx)("div",{className:n()["task-tag"],children:t},t)}))}),(0,l.jsxs)("div",{className:n()["task-solves"],children:[e.solved_by.length," solves"]})]})]})})},d=function(t){var e=t.tasks,a=t.sortTask,r=t.isSolved;return(0,l.jsx)("div",{style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, 12rem)"},children:a(e).map((function(t){var e=r(t);return(0,l.jsx)(c,{task:t,isSolved:e},t.id)}))})}},9474:function(t,e,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tasks/[id]",function(){return a(3633)}])},7604:function(t){t.exports={button:"button_button__QorBz"}},1072:function(t){t.exports={text:"input_text__1zuxK"}},7725:function(t){t.exports={task:"taskCard_task__qvitD","task-cover":"taskCard_task-cover__1hS5b","task-solved":"taskCard_task-solved__Dcid3","task-name":"taskCard_task-name__2NRpG","task-upper":"taskCard_task-upper__SHnLo","task-middle":"taskCard_task-middle__2gmkw","task-score":"taskCard_task-score__Wbx3W","task-lower":"taskCard_task-lower__3tJlI","task-tags":"taskCard_task-tags__2OP0Y","task-tag":"taskCard_task-tag__3ZxNd","task-solves":"taskCard_task-solves__s34dM"}},9034:function(t){t.exports={"lds-dual-ring":"loading_lds-dual-ring__1T8NG"}},7979:function(t){t.exports={"dialog-head":"taskmodal_dialog-head__2-D-y","dialog-tags":"taskmodal_dialog-tags__2BIci","dialog-tag":"taskmodal_dialog-tag__1YM1Y","dialog-attachments":"taskmodal_dialog-attachments__3MePg","dialog-author":"taskmodal_dialog-author__1qyU6",dialog:"taskmodal_dialog__2kueO","dialog-left":"taskmodal_dialog-left__2uF2w","dialog-right":"taskmodal_dialog-right__LFPjp","dialog-right-inner":"taskmodal_dialog-right-inner__exiLQ","dialog-solvenum":"taskmodal_dialog-solvenum__2_EnO","dialog-solves":"taskmodal_dialog-solves__2buxq","dialog-solve-team":"taskmodal_dialog-solve-team__2Gdo5","dialog-background":"taskmodal_dialog-background__2Hhp2","dialog-wrapper":"taskmodal_dialog-wrapper__30vqr"}}},function(t){t.O(0,[662,693,774,888,179],(function(){return e=9474,t(t.s=e);var e}));var e=t.O();_N_E=e}]);